<erl>

out(A) ->
    Q = yaws_api:parse_query(A),
    dispatch(lkup("op", Q), A, Q).

dispatch("click", A, Q) ->
    {content,
        "application/json; charset=iso-8859-1",
        json:encode({struct, [{"id", lkup("id", Q)}, {"src", "/game/images/o.png"}]})}.

lkup(Key, List) ->
    case lists:keysearch(Key, 1, List) of
    {value,{_,Value}} -> Value;
    _                 -> false
    end.

</erl>
